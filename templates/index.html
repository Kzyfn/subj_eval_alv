{% extends "layout.html" %}
{% block content %}
  <!-- Form
  ================================================== -->
<div class="form" style='width:100%'>
  <div class="container" style='width:100%'>
    <div class="row">
      <div class="col-md-12">
        <div style='height: 10pt'></div>
        <p class="lead">
          下のフォームから，大阪弁らしくきこえるアクセントを付与してください．<br>チェックボックスの中の上のボタンほどその文字での音が高く，下のボタンほど低くなります．
          <br>まず参照音声を聞き，その音声でアクセントがおかしい文字のチェックボックスの値を変更してください．
          <br>適切であると思うアクセントを振り終わったら，「音声を生成」ボタンを押してそのアクセントで合成した音声を聞き，自然な大阪弁であれば完了を押してください．
          <br>まだ完全に自然でない場合は，アクセントがおかしい部分を修正して再度音声を確認してください．
        </p>
        <p>対象テキスト: 「{{ natural_sentence }}」</p>

        
        <div class="row" style='display: flex; flex-direction: row; align-items: stretch;'>
    



          <form action="/post" method="post" class="row form-inline" id="accent_labels" style='width: 70%' >
            {% if filepath %}
            <input type="text" name="filepath" placeholder="" value={{ filepath }} readonly>
            {% endif %}
            <div class="col" style='display: flex; flex-direction: column;'>
              <p>音</p>
              <p>高い</p>
              <p>低い</p>
            </div>

            <div class="row" style='flex-direction: row; display: flex;'>
            {% for letter_form in sentence_form %}
            <!-- ループの中身 -->
              <div class="col" style='flex-direction: column; display: flex;'>
                {% autoescape false %}
                {{ letter_form }}
                {% endautoescape %}
              </div>
            {% endfor %}
            </div>
          
          </form>
          
        </div>
        <label>再生速度</label>
        <input type="number" min=0.1 max=1 value={{ rate }} name='rate' form='accent_labels' step="0.1">
        <label>倍速</label>
        
        <button type="submit" class="btn btn-default" style='border-color: black;' form='accent_labels'>音声を生成</button>

        {% if filepath %}
        <div style='display: flex; flex-direction: column;'>

          <audio
          style='margin: 5pt;'
          controls
          src={{ filepath }}>
              Your browser does not support the
              <code>audio</code> element.
          </audio>

          <button type="submit" class="btn btn-default" form='accent_labels' formaction='/done' style='border-color: black; align-self: start;' >完了する</button>
          
          <p>参照音声</p>
          <audio
          style='margin: 5pt;'
          controls
          src=/static/wav/OSAKA3696_3447_accent_rnn.wav>
              Your browser does not support the
              <code>audio</code> element.
          </audio>
        
        </div>
        

        {% endif %}

      </div>
    </div>
  </div>
</div>
{% endblock %}

